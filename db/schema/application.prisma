enum ApplicationStatus {
  PENDING
  APPROVED
  REJECTED
}

enum ApplicationType {
  KKB3
  KKB8
  STUDENT
}

model Application {
  id   String          @id
  type ApplicationType

  // Personal Information
  firstName    String
  lastName     String
  gender       String
  nationality  String
  birthDate    DateTime
  birthPlace   String
  birthCountry String
  street       String
  postalCode   String
  country      String
  city         String

  // Agency Information
  agencyName    String
  agencyAddress String

  // Study Information
  semesterBreakFrom  DateTime?
  semesterBreakTo    DateTime?
  university         String?
  studySubject       String?
  germanLevel        String?
  otherLanguages     String?
  driverLicense      String?
  canRideBike        Boolean?
  shiftWork          Boolean?
  healthRestrictions String?
  allergies          String?
  clothingSize       String?
  shoeSize           String?

  // Previous Experience
  hasBeenInCountryBefore Boolean
  previousStayCountry    String?
  previousStayPlace      String?
  previousStayPeriodFrom DateTime?
  previousStayPeriodTo   DateTime?

  // Contact Information
  phone     String
  email     String
  taxId     String?
  instagram String?

  // Files
  fotoKey                    String
  passportKey                String
  languageCertificateKey     String?
  studyCertificateKey        String?
  certificateOfEnrollmentKey String? // Only for STUDENT visa

  // Emergency Contact
  emergencyContactName  String
  emergencyContactPhone String

  status ApplicationStatus? @default(PENDING)

  userId String?
  user   User?   @relation(fields: [userId], references: [id])

  employerId String?
  employer   Employer? @relation(fields: [employerId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt

  @@map("application")
}
